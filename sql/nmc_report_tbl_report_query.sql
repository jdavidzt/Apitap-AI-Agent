CREATE DATABASE  IF NOT EXISTS `nmc_report` /*!40100 DEFAULT CHARACTER SET utf8 */;
USE `nmc_report`;
-- MySQL dump 10.13  Distrib 5.7.17, for Win64 (x86_64)
--
-- Host: 127.0.0.1    Database: nmc_report
-- ------------------------------------------------------
-- Server version	5.7.29-log

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `tbl_report_query`
--

DROP TABLE IF EXISTS `tbl_report_query`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tbl_report_query` (
  `id` int(11) NOT NULL,
  `schema` varchar(45) DEFAULT NULL,
  `query_select_default` text,
  `query_select_optional` text,
  `query_from` text,
  `query_where` text,
  `query_filter` text,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tbl_report_query`
--

LOCK TABLES `tbl_report_query` WRITE;
/*!40000 ALTER TABLE `tbl_report_query` DISABLE KEYS */;
INSERT INTO `tbl_report_query` VALUES (1,'dbuser','CONCAT(\'\"53\":\"\',COALESCE( dbuser.GetNMCID(H.tbl_user_id),\'\'),\'\"\') AS \'53\'','CONCAT(\',\"114.179\":\"\',COALESCE(dbuser.GetNMCID(A.tbl_user_id),\'\'),\'\"\') AS \'114.179\', CONCAT(\',\"114.70\":\"\',COALESCE(hex(A.tbl_user_companyName),\'\'),\'\"\') AS \'114.70\', CONCAT(\',\"114.143\":\"\',COALESCE(A.tbl_userstatus_id,\'\'),\'\"\') AS \'114.143\', CONCAT(\',\"114.47\":\"\',COALESCE(C.tbl_location_id,\'\'),\'\"\') AS \'114.47\', CONCAT(\',\"122.119\":\"\',COALESCE(C.tbl_location_storeNumber,\'\'),\'\"\') AS \'122.119\', CONCAT(\',\"114.121\":\"\',COALESCE(D.tbl_product_count,0),\'\"\') AS \'114.121\', CONCAT(\',\"122.144\":\"\',COALESCE(F.tbl_discount_count,0),\'\"\') AS \'122.144\', CONCAT(\',\"122.146\":\"\',COALESCE(I.tbl_items_sold,0),\'\"\') AS \'122.146\', CONCAT(\',\"114.3\":\"\',COALESCE(hex(A.tbl_user_first),\'\'),\'\"\') AS \'114.3\', CONCAT(\',\"114.5\":\"\',COALESCE(hex(A.tbl_user_last),\'\'),\'\"\') AS \'114.5\',  CONCAT(\',\"127.10\":\"\',COALESCE(A.tbl_owner_id,\'\'),\'\"\') AS \'127.10\', CONCAT(\',\"122.91\":\"\',COALESCE(A.tbl_user_position,\'\'),\'\"\') AS \'122.91\', CONCAT(\',\"120.157\":\"\',COALESCE(hex(L.tbl_department_name),\'\'),\'\"\') AS \'120.157\', CONCAT(\',\"121.145\":\"\',COALESCE(dbuser.GetNMCUserName(A.tbl_user_supervisor),\'\'),\'\"\') AS \'121.145\', CONCAT(\',\"122.89\":\"\',COALESCE(J.tbl_catalog_count,0),\'\"\') AS \'122.89\', CONCAT(\',\"48.28\":\"\',COALESCE(K.tbl_phone_phoneNumber,\'\'),\'\"\') AS \'48.28\', CONCAT(\',\"114.150\":\"\',COALESCE(A.tbl_user_parentId,\'\'),\'\"\') AS \'114.150\'','from dbuser.tbl_user as A left join dbuser.tbl_merchant as B on B.tbl_user_id = A.tbl_user_id left join dbuser.tbl_user as H on H.tbl_user_id = B.tbl_user_reseller_id left join dbuser.tbl_location as C on C.tbl_location_userId = B.tbl_user_id left join dbitems.vw_active_product as D on D.tbl_user_id= B.tbl_user_id left join dbitems.vw_active_discount as F on F.tbl_user_id= B.tbl_user_id left join dbtransaction.vw_items_sold as I on I.tbl_user_id= B.tbl_user_id left join dbitems.vw_active_catalog as J on J.tbl_user_id= B.tbl_user_id left join dbuser.vw_contact_phone as K on K.tbl_user_id= B.tbl_user_id left join dbuser.tbl_department as L on L.tbl_department_id = A.tbl_user_department','where  B.tbl_user_id = A.tbl_user_id','H.tbl_user_id  =(select right(FILTER(53),11)); A.tbl_user_id  =(select right(FILTER(114.179),11)); A.tbl_userstatus_id FILTER(114.143); C.tbl_location_id FILTER(114.47); C.tbl_location_storeNumber FILTER(122.119); D.tbl_product_count FILTER(114.121); E.tbl_service_count FILTER(114.132); F.tbl_discount_count FILTER(122.144); G.tbl_membership_count FILTER(122.148); I.tbl_items_sold FILTER(122.146); A.tbl_owner_id FILTER(127.10); A.tbl_user_position FILTER(122.91); L.tbl_department_name FILTER(120.157); A.tbl_user_supervisor FILTER(121.145); J.tbl_catalog_count FILTER(122.89); K.tbl_phone_phoneNumber FILTER(48.28); A.tbl_user_first FILTER(114.3); A.tbl_user_last FILTER(114.5); A.tbl_user_parentId  =(select right(FILTER(114.150),11))'),(2,'dbtransaction','CONCAT(\'\"121.75\":\"\',COALESCE(A.tbl_invoice_id,\'\'),\'\"\') AS \'121.75\'','CONCAT(\',\"120.31\":\"\',COALESCE(A.tbl_invoice_date,\'\'),\'\"\') AS \'120.31\', CONCAT(\',\"114.179\":\"\',COALESCE( dbuser.GetNMCID(B.tbl_user_id),\'\'),\'\"\') AS \'114.179\', CONCAT(\',\"53\":\"\',COALESCE(dbuser.GetNMCID(D.tbl_user_id),\'\'),\'\"\') AS \'53\', CONCAT(\',\"114.53\":\"\',COALESCE(dbuser.GetNMCUserName(D.tbl_user_id),\'\'),\'\"\') AS \'114.53\', CONCAT(\',\"48.29\":\"\',COALESCE(E.tbl_transactiontype_id,\'\'),\'\"\') AS \'48.29\', CONCAT(\',\"114.143\":\"\',COALESCE(A.tbl_invoicestatus_id,\'\'),\'\"\') AS \'114.143\', CONCAT(\',\"55.3\":\"\',COALESCE(A.tbl_invoice_totalAmount,\'\'),\'\"\') AS \'55.3\', CONCAT(\',\"116.101\":\"\',COALESCE(if(I.tbl_company_consignment_program_f=1,if(J.tbl_apitap_consignment_daysToPay,DATE(DATE_ADD(A.tbl_invoice_date, INTERVAL J.tbl_apitap_consignment_daysToPay DAY)),DATE(DATE_ADD(A.tbl_invoice_date, INTERVAL (select tbl_apitap_consignment_daysToPay from dbuser.tbl_apitap_consignment where tbl_apitap_consignment_id = 1) DAY))),\'\'),\'\'),\'\"\') AS \'116.101\', CONCAT(\',\"120.22\":\"\',COALESCE(if(I.tbl_company_consignment_program_f=1,CAST(if(J.tbl_apitap_consignment_commission_rate,(A.tbl_invoice_totalAmount * J.tbl_apitap_consignment_commission_rate/100), (A.tbl_invoice_totalAmount*(select tbl_apitap_consignment_commission_rate from dbuser.tbl_apitap_consignment where tbl_apitap_consignment_id = 1)/100)) AS DECIMAL(15,2)),\'\'),\'\'),\'\"\') AS \'120.22\'','from dbtransaction.tbl_invoice as A left join dbuser.tbl_user as B on B.tbl_user_id = A.tbl_merchant_nmcId left join dbuser.tbl_user as D on D.tbl_user_id = A.tbl_consumer_nmcId left join dbtransaction.tbl_transaction as E on E.tbl_invoice_id = A.tbl_invoice_id left join dbcards.tbl_card as F on F.tbl_card_tocken = E.tbl_transaction_cardTocken left join dbtransaction.tbl_invoiceproduct as H on H.tbl_invoice_id = A.tbl_invoice_id left join dbuser.tbl_company as I on B.tbl_company_id = I.tbl_company_id left join dbuser.tbl_apitap_consignment as J on I.tbl_company_id = J.tbl_company_id ','where  A.tbl_invoice_id = H.tbl_invoice_id','A.tbl_invoice_id FILTER(121.75); A.tbl_invoice_date >= DATE_FORMAT(FILTER(120.31),\'%Y-%m-%d 00:00:00\'); B.tbl_user_id  =(select right(FILTER(114.179),11)); C.tbl_location_id FILTER(114.47); C.tbl_location_storeNumber FILTER(122.119); D.tbl_user_id  =(select right(FILTER(53),11)); D.tbl_user_first FILTER(114.3); D.tbl_user_last FILTER(114.5); F.tbl_cardstype_id FILTER(120.7); F.tbl_card_chardholderName FILTER(48.2); E.tbl_transactiontype_id FILTER(48.29); A.tbl_invoicestatus_id FILTER(114.143); H.tbl_invoiceproduct_quantity FILTER(122.148); A.tbl_invoice_totalAmount FILTER(55.3)'),(3,'dbitems','CONCAT(\'\"114.144\":\"\',COALESCE(A.tbl_product_id,\'\'),\'\"\') AS \'114.144\'','CONCAT(\',\"114.112\":\"\',COALESCE(A.tbl_producttype_id,\'\'),\'\"\') AS \'114.112\',CONCAT(\',\"120.45\":\"\',COALESCE(F.tbl_categorydescription_name,\'\'),\'\"\') AS \'120.45\',CONCAT(\',\"114.53\":\"\',COALESCE(G.tbl_categorydescription_name,\'\'),\'\"\') AS \'114.53\',CONCAT(\',\"120.83\":\"\',COALESCE(hex(A.tbl_product_name),\'\'),\'\"\') AS \'120.83\',CONCAT(\',\"121.102\":\"\',COALESCE(A.tbl_product_sku,\'\'),\'\"\') AS \'121.102\',CONCAT(\',\"114.143\":\"\',COALESCE(A.tbl_productstatus_id,\'\'),\'\"\') AS \'114.143\',CONCAT(\',\"114.149\":\"\',COALESCE(hex(A.tbl_product_brand),\'\'),\'\"\') AS \'114.149\',CONCAT(\',\"114.121\":\"\',COALESCE(E.tbl_quantity,0),\'\"\') AS \'114.121\',CONCAT(\',\"114.98\":\"\',COALESCE(A.tbl_product_regularPrice,\'\'),\'\"\') AS \'114.98\',CONCAT(\',\"114.179\":\"\',COALESCE(dbuser.GetNMCID(A.tbl_product_usernmcId),\'\'),\'\"\') AS \'114.179\' ,CONCAT(\',\"127.20\":\"\',COALESCE(A.tbl_product_views_counter + A.tbl_product_views_counter_apitap,\'\'),\'\"\') AS \'127.20\',CONCAT(\',\"118.6\":\"\',COALESCE(A.tbl_product_views_lastDate,\'\'),\'\"\') AS \'118.6\'','from dbitems.tbl_product as A left join dbitems.tbl_productcategory as B on B.tbl_product_id = A.tbl_product_id left join dbitems.tbl_category as C on C.tbl_category_id = B.tbl_category_id left join dbuser.tbl_user as D on D.tbl_user_id = A.tbl_product_usernmcId left join dbtransaction.vw_quantity_sold_per_item as E on E.tbl_product_id = A.tbl_product_id left join dbitems.tbl_categorydescription as F on B.tbl_category_id = F.tbl_category_id left join dbitems.tbl_categorydescription as G on C.tbl_category_parentId = G.tbl_category_id ','where  A.tbl_product_usernmcId = D.tbl_user_id and B.tbl_category_portal_f = 1','A.tbl_product_id FILTER(114.144); A.tbl_product_sku FILTER(121.102); A.tbl_product_name FILTER(120.83); A.tbl_producttype_id FILTER(114.112); A.tbl_product_brand FILTER(114.149); F.tbl_categorydescription_name FILTER(120.45); G.tbl_categorydescription_name FILTER(114.53); A.tbl_productstatus_id FILTER(114.143); A.tbl_product_regularPrice FILTER(114.98); E.tbl_quantity FILTER(114.121); A.tbl_product_usernmcId  =(select right(FILTER(114.179),11)) ; A.tbl_product_views_counter FILTER(127.20); A.tbl_product_views_lastDate FILTER(118.6); '),(4,'dbtransaction','CONCAT(\'\"121.75\":\"\',COALESCE(A.tbl_bill_id,\'\' ),\'\"\') AS \'121.75\'','CONCAT(\',\"121.192\":\"\',COALESCE(A.tbl_bill_id,\'\' ),\'\"\') AS \'121.192\',CONCAT(\',\"121.140\":\"\',COALESCE(A.tbl_bill_date,\'\'),\'\"\') AS \'121.140\', CONCAT(\',\"121.41\":\"\',COALESCE(A.tbl_bill_number,\'\'),\'\"\') AS \'121.41\', CONCAT(\',\"114.179\":\"\',COALESCE(dbuser.GetNMCID(B.tbl_user_id),\'\'),\'\"\') AS \'114.179\', CONCAT(\',\"120.84\":\"\',COALESCE(A.tbl_bill_amount,\'\'),\'\"\') AS \'120.84\', CONCAT(\',\"48.3\":\"\',COALESCE(F.tbl_cardstype_id,\'\'),\'\"\') AS \'48.3\', CONCAT(\',\"114.143\":\"\',COALESCE(A.tbl_bill_status,\'\'),\'\"\') AS \'114.143\'  ','from dbtransaction.tbl_bill as A left join dbuser.tbl_user as B on B.tbl_user_id = A.tbl_bill_merchant_nmcId left join dbtransaction.tbl_billtransaction as E on A.tbl_bill_id = E.tbl_bill_id left join dbcards.tbl_card as F on B.tbl_user_id = F.tbl_user_id left join dbuser.tbl_merchant as H on B.tbl_user_id = H.tbl_user_id','where B.tbl_user_id = A.tbl_bill_merchant_nmcId','A.tbl_bill_id FILTER(121.75); A.tbl_bill_date >= DATE_FORMAT(FILTER(121.140),\'%Y-%m-%d 00:00:00\'); A.tbl_bill_number FILTER(121.41); B.tbl_user_id  =(select right(FILTER(114.179),11)); A.tbl_bill_amount FILTER(120.84); F.tbl_cardstype_id FILTER(48.3); A.tbl_bill_status FILTER(114.143); H.tbl_user_reseller_id  =(select right(FILTER(53),11)); '),(5,'dbitems','CONCAT(\'\"114.101\":\"\',tbl_package.tbl_package_id,\'\"\') AS \'114.101\'','CONCAT(\',\"114.156\":\"\',COALESCE(hex(tbl_package.tbl_package_name),\'\'),\'\"\') AS \'114.156\',CONCAT(\',\"114.143\":\"\',tbl_package.tbl_packagestatus_id,\'\"\') AS \'114.143\',CONCAT(\',\"127.94\":\"\', if((select A.tbl_shuffle_published from dbitems.tbl_package_shuffle as A where A.tbl_package_id = tbl_package.tbl_package_id limit 1)= 1,\'true\',\'false\'),\'\"\') AS \'127.94\',CONCAT(\',\"114.138\":\"\',dbitems.getNMCPackageDashboardMerchantStartDate(tbl_package.tbl_package_id),\'\"\') AS \'114.138\',CONCAT(\',\"114.139\":\"\',dbitems.getNMCPackageDashboardMerchantEndDate(tbl_package.tbl_package_id),\'\"\') AS \'114.139\',CONCAT(\',\"127.120\":\"\',dbitems.getNMCPackageDashboardMerchantItemsCount(tbl_package.tbl_package_id),\'\"\') AS \'127.120\',CONCAT(\',\"127.115\":\"\',dbitems.getNMCPackageDashboardMerchantImagesCount(tbl_package.tbl_package_id),\'\"\') AS \'127.115\',CONCAT(\',\"127.116\":\"\',dbitems.getNMCPackageDashboardMerchantVideosCount(tbl_package.tbl_package_id),\'\"\') AS \'127.116\',CONCAT(\',\"127.118\":\"\',dbitems.getNMCPackageDashboardMerchantLocationsCount(tbl_package.tbl_package_id),\'\"\') AS \'127.118\',CONCAT(\',\"127.119\":\"\',dbitems.getNMCPackageDashboardMerchantTerminalCount(tbl_package.tbl_package_id),\'\"\') AS \'127.119\',CONCAT(\',\"114.121\":\"\',dbitems.getNMCPackageDashboardMerchantLikesCount(tbl_package.tbl_package_id),\'\"\') AS \'114.121\',CONCAT(\',\"114.132\":\"\',dbitems.getNMCPackageDashboardMerchantDislikesCount(tbl_package.tbl_package_id),\'\"\') AS \'114.132\',CONCAT(\',\"127.117\":\"\',dbitems.getNMCPackageDashboardMerchantRepublishedCount(tbl_package.tbl_package_id),\'\"\') AS \'127.117\',CONCAT(\',\"127.107\":\"\',coalesce((SELECT T.tbl_shuffle_id FROM dbitems.tbl_package_shuffle AS T WHERE T.tbl_package_id = tbl_package.tbl_package_id LIMIT 1),\'\') ,\'\"\') AS \'127.107\',CONCAT(\',\"114.9\":\"\',coalesce(dbitems.ValidateNMCShuffleSchedule((select A.tbl_shuffle_id from dbitems.tbl_package_shuffle as A where A.tbl_package_id = tbl_package.tbl_package_id limit 1)),\'false\'),\'\"\') AS \'114.9\' ','from dbitems.tbl_package ','where length(dbitems.getNMCPackageDashboardMerchantStartDate(tbl_package.tbl_package_id)) != 0 and length(dbitems.getNMCPackageDashboardMerchantEndDate(tbl_package.tbl_package_id) ) != 0','tbl_package_usernmcId = (select right(dbuser.GetMainUser((select right(FILTER(114.179),11))),11)); tbl_package.tbl_package_name FILTER(114.156); tbl_package.tbl_packagestatus_id FILTER(114.143); dbitems.getNMCPackageDashboardMerchantStartDate(tbl_package.tbl_package_id) >= DATE_FORMAT(FILTER(114.138),\'%Y-%m-%d 00:00:00\'); dbitems.getNMCPackageDashboardMerchantEndDate(tbl_package.tbl_package_id) >= DATE_FORMAT(FILTER(114.139),\'%Y-%m-%d 00:00:00\'); dbitems.getNMCPackageDashboardMerchantItemsCount(tbl_package.tbl_package_id) FILTER(127.120); dbitems.getNMCPackageDashboardMerchantImagesCount(tbl_package.tbl_package_id) FILTER(127.115); dbitems.getNMCPackageDashboardMerchantVideosCount(tbl_package.tbl_package_id) FILTER(127.116); dbitems.getNMCPackageDashboardMerchantLocationsCount(tbl_package.tbl_package_id) FILTER(127.118); dbitems.getNMCPackageDashboardMerchantTerminalCount(tbl_package.tbl_package_id) FILTER(127.119); dbitems.getNMCPackageDashboardMerchantLikesCount(tbl_package.tbl_package_id) FILTER(114.121); dbitems.getNMCPackageDashboardMerchantDislikesCount(tbl_package.tbl_package_id) FILTER(114.132); dbitems.getNMCPackageDashboardMerchantRepublishedCount(tbl_package.tbl_package_id) FILTER(127.117);'),(6,'dbitems','CONCAT(\'\"114.144\":\"\',COALESCE(A.tbl_product_id,\'\'),\'\"\') AS \'114.144\'','CONCAT(\',\"114.112\":\"\',COALESCE(A.tbl_producttype_id,\'\'),\'\"\') AS \'114.112\', CONCAT(\',\"120.45\":\"\',COALESCE(F.tbl_categorydescription_name,\'\'),\'\"\') AS \'120.45\', CONCAT(\',\"114.53\":\"\',COALESCE(G.tbl_categorydescription_name,\'\'),\'\"\') AS \'114.53\', CONCAT(\',\"120.83\":\"\',COALESCE(hex(A.tbl_product_name),\'\'),\'\"\') AS \'120.83\', CONCAT(\',\"114.98\":\"\',COALESCE(A.tbl_product_salePrice,\'\'),\'\"\') AS \'114.98\', CONCAT(\',\"121.150\":\"\',COALESCE((select I.tbl_location_storeName from dbuser.tbl_location as I, dbitems.tbl_productlocation as J where J.tbl_product_id = A.tbl_product_id and J.tbl_location_id = I.tbl_location_id limit 1),\'\'),\'\"\') AS \'121.150\', CONCAT(\',\"114.121\":\"\',COALESCE(E.tbl_quantity,0),\'\"\') AS \'114.121\', CONCAT(\',\"114.179\":\"\',COALESCE(dbuser.GetNMCID(A.tbl_product_usernmcId),\'\'),\'\"\') AS \'114.179\'','from dbitems.tbl_product as A left join dbitems.tbl_productcategory as B on B.tbl_product_id = A.tbl_product_id left join dbitems.tbl_category as C on C.tbl_category_id = B.tbl_category_id left join dbuser.tbl_user as D on D.tbl_user_id = A.tbl_product_usernmcId left join dbtransaction.vw_quantity_sold_per_item as E on E.tbl_product_id = A.tbl_product_id left join dbitems.tbl_categorydescription as F on B.tbl_category_id = F.tbl_category_id left join dbitems.tbl_categorydescription as G on C.tbl_category_parentId = G.tbl_category_id ','where A.tbl_product_usernmcId = D.tbl_user_id and E.tbl_quantity > 0 and B.tbl_category_portal_f = 1','A.tbl_product_id FILTER(114.144); A.tbl_product_name FILTER(120.83); F.tbl_categorydescription_name FILTER(120.45); G.tbl_categorydescription_name FILTER(114.53); A.tbl_product_salePrice FILTER(114.98); E.tbl_quantity FILTER(114.121); A.tbl_product_usernmcId  =(select right(FILTER(114.179),11)); (select I.tbl_location_storeName from dbuser.tbl_location as I, dbitems.tbl_productlocation as J where J.tbl_product_id = A.tbl_product_id and J.tbl_location_id = I.tbl_location_id limit 1) FILTER(121.150)'),(7,'dbitems','CONCAT(\'\"114.144\":\"\',COALESCE(A.tbl_product_id,\'\'),\'\"\') AS \'114.144\'','CONCAT(\',\"114.112\":\"\',COALESCE(A.tbl_producttype_id,\'\'),\'\"\') AS \'114.112\', CONCAT(\',\"120.45\":\"\',COALESCE(F.tbl_categorydescription_name,\'\'),\'\"\') AS \'120.45\', CONCAT(\',\"114.53\":\"\',COALESCE(G.tbl_categorydescription_name,\'\'),\'\"\') AS \'114.53\', CONCAT(\',\"120.83\":\"\',COALESCE(hex(A.tbl_product_name),\'\'),\'\"\') AS \'120.83\', CONCAT(\',\"114.98\":\"\',COALESCE(A.tbl_product_salePrice,\'\'),\'\"\') AS \'114.98\', CONCAT(\',\"121.150\":\"\',COALESCE((select I.tbl_location_storeName from dbuser.tbl_location as I, dbitems.tbl_productlocation as J where J.tbl_product_id = A.tbl_product_id and J.tbl_location_id = I.tbl_location_id limit 1),\'\'),\'\"\') AS \'121.150\', CONCAT(\',\"114.121\":\"\',COALESCE(E.tbl_quantity,0),\'\"\') AS \'114.121\', CONCAT(\',\"114.179\":\"\',COALESCE(dbuser.GetNMCID(A.tbl_product_usernmcId),\'\'),\'\"\') AS \'114.179\'','from dbitems.tbl_product as A left join dbitems.tbl_productcategory as B on B.tbl_product_id = A.tbl_product_id left join dbitems.tbl_category as C on C.tbl_category_id = B.tbl_category_id left join dbuser.tbl_user as D on D.tbl_user_id = A.tbl_product_usernmcId left join dbitems.vw_product_favorite as E on E.tbl_product_id = A.tbl_product_id left join dbitems.tbl_categorydescription as F on B.tbl_category_id = F.tbl_category_id left join dbitems.tbl_categorydescription as G on C.tbl_category_parentId = G.tbl_category_id ','where A.tbl_product_usernmcId = D.tbl_user_id and E.tbl_quantity > 0 and B.tbl_category_portal_f = 1','A.tbl_product_id FILTER(114.144); A.tbl_product_name FILTER(120.83); F.tbl_categorydescription_name FILTER(120.45); G.tbl_categorydescription_name FILTER(114.53); A.tbl_product_salePrice FILTER(114.98); E.tbl_quantity FILTER(114.121); A.tbl_product_usernmcId  =(select right(FILTER(114.179),11)); (select I.tbl_location_storeName from dbuser.tbl_location as I, dbitems.tbl_productlocation as J where J.tbl_product_id = A.tbl_product_id and J.tbl_location_id = I.tbl_location_id limit 1) FILTER(121.150)'),(8,'dbuser','CONCAT(\'\"53\":\"\',COALESCE( dbuser.GetNMCID(H.tbl_user_id),\'\'),\'\"\') AS \'53\'','CONCAT(\',\"114.179\":\"\',COALESCE(dbuser.GetNMCID(A.tbl_user_id),\'\'),\'\"\') AS \'114.179\', CONCAT(\',\"114.70\":\"\',COALESCE(hex(A.tbl_user_companyName),\'\'),\'\"\') AS \'114.70\', CONCAT(\',\"114.143\":\"\',COALESCE(A.tbl_userstatus_id,\'\'),\'\"\') AS \'114.143\', CONCAT(\',\"114.121\":\"\',COALESCE(D.tbl_product_count,0),\'\"\') AS \'114.121\', CONCAT(\',\"121.13\":\"\',COALESCE(F.tbl_discount_count,0),\'\"\') AS \'121.13\', CONCAT(\',\"114.132\":\"\',COALESCE(I.tbl_items_sold,0),\'\"\') AS \'114.132\', CONCAT(\',\"114.3\":\"\',COALESCE(hex(A.tbl_user_first),\'\'),\'\"\') AS \'114.3\', CONCAT(\',\"114.5\":\"\',COALESCE(hex(A.tbl_user_last),\'\'),\'\"\') AS \'114.5\',  CONCAT(\',\"127.10\":\"\',COALESCE(A.tbl_owner_id,\'\'),\'\"\') AS \'127.10\', CONCAT(\',\"122.91\":\"\',COALESCE(A.tbl_user_position,\'\'),\'\"\') AS \'122.91\', CONCAT(\',\"120.157\":\"\',COALESCE(hex(L.tbl_department_name),\'\'),\'\"\') AS \'120.157\', CONCAT(\',\"121.145\":\"\',COALESCE(dbuser.GetNMCUserName(A.tbl_user_supervisor),\'\'),\'\"\') AS \'121.145\', CONCAT(\',\"122.89\":\"\',COALESCE(J.tbl_catalog_count,0),\'\"\') AS \'122.89\', CONCAT(\',\"48.28\":\"\',COALESCE(K.tbl_phone_phoneNumber,\'\'),\'\"\') AS \'48.28\', CONCAT(\',\"114.150\":\"\',COALESCE(A.tbl_user_parentId,\'\'),\'\"\') AS \'114.150\'','from dbuser.tbl_user as A left join dbuser.tbl_merchant as B on B.tbl_user_id = A.tbl_user_id left join dbuser.tbl_user as H on H.tbl_user_id = B.tbl_user_reseller_id left join dbitems.vw_active_product as D on D.tbl_user_id= B.tbl_user_id left join dbitems.vw_active_discount as F on F.tbl_user_id= B.tbl_user_id left join dbtransaction.vw_items_sold as I on I.tbl_user_id= B.tbl_user_id left join dbitems.vw_active_catalog as J on J.tbl_user_id= B.tbl_user_id left join dbuser.vw_contact_phone as K on K.tbl_user_id= B.tbl_user_id left join dbuser.tbl_department as L on L.tbl_department_id = A.tbl_user_department','where  B.tbl_user_id = A.tbl_user_id','H.tbl_user_id = (select right(FILTER(114.179),11)); A.tbl_user_id = (select right(FILTER(53),11)); A.tbl_userstatus_id FILTER(114.143); C.tbl_location_id FILTER(114.47); C.tbl_location_storeNumber FILTER(122.119); D.tbl_product_count FILTER(114.121); F.tbl_discount_count FILTER(121.13); I.tbl_items_sold FILTER(114.132); A.tbl_owner_id FILTER(127.10); A.tbl_user_position FILTER(122.91); L.tbl_department_name FILTER(120.157); A.tbl_user_supervisor FILTER(121.145); J.tbl_catalog_count FILTER(122.89); K.tbl_phone_phoneNumber FILTER(48.28); A.tbl_user_first FILTER(114.3); A.tbl_user_last FILTER(114.5); A.tbl_user_parentId  =(select right(FILTER(114.150),11)); A.tbl_user_companyName FILTER(114.70)'),(9,'dbtransaction','CONCAT(\'\"121.75\":\"\',COALESCE(A.tbl_bill_id,\'\' ),\'\"\') AS \'121.75\'','CONCAT(\',\"121.192\":\"\',COALESCE(A.tbl_bill_id,\'\' ),\'\"\') AS \'121.192\',CONCAT(\',\"121.140\":\"\',COALESCE(A.tbl_bill_date,\'\'),\'\"\') AS \'121.140\', CONCAT(\',\"121.41\":\"\',COALESCE(A.tbl_bill_number,\'\'),\'\"\') AS \'121.41\', CONCAT(\',\"53\":\"\',COALESCE(dbuser.GetNMCID(B.tbl_user_id),\'\'),\'\"\') AS \'53\', CONCAT(\',\"114.179\":\"\',COALESCE(dbuser.GetNMCID(B.tbl_user_id),\'\'),\'\"\') AS \'114.179\', CONCAT(\',\"120.84\":\"\',COALESCE(E.tbl_billtransaction_amount,\'\'),\'\"\') AS \'120.84\', CONCAT(\',\"48.3\":\"\',COALESCE(F.tbl_cardstype_id,\'\'),\'\"\') AS \'48.3\', CONCAT(\',\"114.143\":\"\',COALESCE(A.tbl_bill_status,\'\'),\'\"\') AS \'114.143\'  ','from dbtransaction.tbl_bill as A left join dbuser.tbl_user as B on B.tbl_user_id = A.tbl_bill_merchant_nmcId left join dbtransaction.tbl_billtransaction as E on A.tbl_bill_id = E.tbl_bill_id left join dbcards.tbl_card as F on B.tbl_user_id = F.tbl_user_id left join dbuser.tbl_merchant as H on H.tbl_user_id = B.tbl_user_id','where B.tbl_user_id = A.tbl_bill_merchant_nmcId and F.tbl_card_tocken = E.tbl_cardTocken ','H.tbl_user_reseller_id = (select right(FILTER(114.179),11)); B.tbl_user_id = (select right(FILTER(53),11)); A.tbl_bill_id FILTER(121.192); A.tbl_bill_date >= DATE_FORMAT(FILTER(121.140),\'%Y-%m-%d 00:00:00\'); A.tbl_bill_number FILTER(121.41); E.tbl_billtransaction_amount FILTER(120.84); F.tbl_cardstype_id FILTER(48.3); A.tbl_bill_status FILTER(114.143); '),(10,'dbtransaction','CONCAT(\'\"121.75\":\"\',COALESCE(A.tbl_invoice_id,\'\'),\'\"\') AS \'121.75\'','CONCAT(\',\"120.31\":\"\',COALESCE(A.tbl_invoice_date,\'\'),\'\"\') AS \'120.31\', CONCAT(\',\"55.3\":\"\',COALESCE(A.tbl_invoice_totalAmount,\'\'),\'\"\') AS \'55.3\', CONCAT(\',\"116.101\":\"\',COALESCE(if(I.tbl_company_consignment_program_f=1,if(J.tbl_apitap_consignment_daysToPay,DATE(DATE_ADD(A.tbl_invoice_date, INTERVAL J.tbl_apitap_consignment_daysToPay DAY)),DATE(DATE_ADD(A.tbl_invoice_date, INTERVAL (select tbl_apitap_consignment_daysToPay from dbuser.tbl_apitap_consignment where tbl_apitap_consignment_id = 1) DAY))),\'\'),\'\'),\'\"\') AS \'116.101\', CONCAT(\',\"120.22\":\"\',COALESCE(if(I.tbl_company_consignment_program_f=1,CAST(if(J.tbl_apitap_consignment_commission_rate,(A.tbl_invoice_totalAmount * J.tbl_apitap_consignment_commission_rate/100), (A.tbl_invoice_totalAmount*(select tbl_apitap_consignment_commission_rate from dbuser.tbl_apitap_consignment where tbl_apitap_consignment_id = 1)/100)) AS DECIMAL(15,2)),\'\'),\'\'),\'\"\') AS \'120.22\'','from dbtransaction.tbl_invoice as A left join dbuser.tbl_user as B on B.tbl_user_id = A.tbl_merchant_nmcId left join dbuser.tbl_user as D on D.tbl_user_id = A.tbl_consumer_nmcId left join dbtransaction.tbl_transaction as E on E.tbl_invoice_id = A.tbl_invoice_id left join dbcards.tbl_card as F on F.tbl_card_tocken = E.tbl_transaction_cardTocken left join dbtransaction.tbl_invoiceproduct as H on H.tbl_invoice_id = A.tbl_invoice_id left join dbuser.tbl_company as I on B.tbl_company_id = I.tbl_company_id left join dbuser.tbl_apitap_consignment as J on I.tbl_company_id = J.tbl_company_id ','where  A.tbl_invoice_id = H.tbl_invoice_id','A.tbl_invoice_id FILTER(121.75); A.tbl_invoice_date >= DATE_FORMAT(FILTER(120.31),\'%Y-%m-%d 00:00:00\'); A.tbl_invoice_totalAmount FILTER(55.3)'),(13,'dbtransaction','CONCAT(\'\"121.75\":\"\', A.tbl_invoice_id,\'\"\') AS \'121.75\'','CONCAT(\',\"121.41\":\"\', A.tbl_invoice_number,\'\"\') AS \'121.41\', CONCAT(\',\"121.72\":\"\', COALESCE(C.tbl_transactiontype_name,\'\'),\'\"\') AS \'121.72\', CONCAT(\',\"120.31\":\"\', A.tbl_invoice_date,\'\"\') AS \'120.31\', CONCAT(\',\"55.3\":\"\', A.tbl_invoice_totalAmount,\'\"\') AS \'55.3\', CONCAT(\',\"121.97\":\"\', COALESCE(A.tbl_invoice_tax,\'0\'),\'\"\') AS \'121.97\'','from dbtransaction.tbl_invoice as A, tbl_transaction as B, tbl_transactiontype as C','where A.tbl_invoice_id = B.tbl_invoice_id and B.tbl_transactiontype_id = C.tbl_transactiontype_id','A.tbl_merchant_nmcId = (select right(FILTER(53),11)); A.tbl_invoice_id FILTER(121.75); A.tbl_invoice_number FILTER(121.41);C.tbl_transactiontype_name FILTER(121.72);A.tbl_invoice_date >= DATE_FORMAT(FILTER(120.31),\'\'%Y-%m-%d 00:00:00\'\');A.tbl_invoice_totalAmount FILTER(55.3);A.tbl_invoice_tax FILTER(121.97);\'');
/*!40000 ALTER TABLE `tbl_report_query` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2026-01-09 14:34:22
